<subsection xml:id="subsec-histogram">
    <title>Histogram</title>

        <p>
            A histogram is a type of bar graph that shows the frequency distribution of continuous data (grouped data). 
            It helps to understand the shape of data by showing how often values fall into different ranges or intervals (called class intervals or bins)
        </p>
    <activity>
        <p>
            <m>{\color{black} \textbf{Work in groups}}</m>
        </p>
        <tabular  halign="left" top="medium" left="medium" right="medium" bottom="medium">
            <row>
                <cell>Class Interval</cell>
                <cell>Frequency</cell>
            </row>
            <row>
                <cell><m>0-1</m></cell>
                <cell><m>4</m></cell>
            </row>
            <row>
                <cell><m>10-20</m></cell>
                <cell><m>6</m></cell>
            </row>
            <row>
                <cell><m>20-30</m></cell>
                <cell><m>9</m></cell>
            </row>
            <row>
                <cell><m>30-40</m></cell>
                <cell><m>7</m></cell>
            </row>
            <row>
                <cell><m>40-50</m></cell>
                <cell><m>4</m></cell>
            </row>
        </tabular>
        <p>
            <ol marker="a.">
                <li>
                    <p>
                        Plot class intervals on the X-axis.
                    </p>
                </li>
                <li>
                    <p>
                        Plot frequencies on the Y-axis.
                    </p>
                </li>
                <li>
                    <p>
                        Draw bars for each interval with height equal to the frequency.
                    </p>
                </li>
            </ol>
        </p>
    </activity>
    <activity>
        <p>
            Work in groups
        </p>
        <p>
            <ol>
                <li>
                    <p>
                        In a school with <m>500</m> students, their heights were measured and recorded in the following table.
                    </p>
                    <table>
                        <title></title>
                        <tabular left="medium" right="medium" top="medium" bottom="medium">
                            <row halign="left" header="yes">
                                <cell>Height (cm)</cell>
                                <cell>Number of Students (Frequency)</cell>
                            </row>
                            <row>
                                <cell><m>140 - 149</m></cell>
                                <cell><m>30</m></cell>
                            </row>
                            <row>
                                <cell><m>150 - 159</m></cell>
                                <cell><m>70</m></cell>
                            </row>
                            <row>
                                <cell><m>160 - 169</m></cell>
                                <cell><m>110</m></cell>
                            </row>
                            <row>
                                <cell><m>170 - 179</m></cell>
                                <cell><m>150</m></cell>
                            </row>
                            <row>
                                <cell><m>180 - 189</m></cell>
                                <cell><m>90</m></cell>
                            </row>
                            <row>
                                <cell><m>190 - 199</m></cell>
                                <cell><m>50</m></cell>
                            </row> 

                        </tabular>
                    </table>
                </li>
                <li>
                    <p>
                        Choose a suitable scale and represent the data on a histogram and a frequency polygon.
                    </p>
                </li>
                <li>
                    <p>
                        Compare and discuss your graphs with other groups.
                    </p>
                </li>
            </ol>
        </p>
    </activity>
    <p>
        <m>{\color{black} \textbf{Key Takeaway}}</m>
    </p>
    <p>
        A histogram uses adjacent bars to show frequency distribution, while a frequency polygon connects the midpoints of the bars with a line to show patterns.
    </p>
    <p>
        <m>\textbf{Class Width}</m> is the difference between the upper and lower boundaries of a class.
    </p>
    <p>
        <m>\textbf{Equal class width}</m> means all bars have the same width.
    </p>
    <p>
        <m>\textbf{Unequal class width}</m> means bars have different widths to better represent uneven data.
    </p>
    <p>
        <m>\textbf{Frequency density}</m> is a measure used in histograms to ensure that the area of each bar represents the actual frequency of observations, especially when class widths are unequal.
    </p>
    <p>
        Frequency density is calculated using the formula:
    </p>
    <p>
        <md>
            <mrow>\textbf{Frequency density} =  \amp \frac{\textbf{Frequency}}{\textbf{Class width}} </mrow>
        </md>
    </p>
    <p>
        Where;
    </p>
    <p>
        <m>\textbf{Frequency}</m> is the number of observations in a class interval.
    </p>
    
    <p>
        <m>\textbf{Why Use Frequency Density Instead of Frequency?}</m>
    </p>
    <p>
        <ul>
            <li>
                <p>
                    In a histogram, the area of each bar (not just the height) represents the frequency.
                </p>
            </li>
            <li>
                <p>
                    If class widths are unequal, simply plotting frequency would distort the representation.
                </p>
            </li>
            <li>
                <p>
                    Using frequency density ensures that the area of each bar remains proportional to the actual frequency.
                </p>
            </li>
        </ul>
    </p>
    
    <p>
        <m>\textbf{Midpoint}</m> of a class interval represents the central value of that range. It is the average of the lower and upper boundaries of the class.
    </p>
    <p>
        Formula for midpoint:
    </p>
    <p>
        <md>
            <mrow>\textbf{Midpoint} = \amp \frac{\textbf{Lower bound + Upper bound}}{2}</mrow>
        </md>
    </p>

        <p>
        If class widths are equal, then frequency can be plotted directly.
    </p>
    <p>
        If class widths are unequal, use frequency density instead of frequency.
    </p>
    
    <example>
        <statement>
            <p>
                The table below presents the salary distribution of employees in a company.
            </p>
            <table>
                <title></title>
                <tabular left="medium" right="medium" top="medium" bottom="medium">
                    <row halign="left" header="yes">
                        <cell>Salary Range (KSh)</cell>
                        <cell>Frequency</cell>
                    </row>
                    <row >
                        <cell><m>1000 - 1500</m></cell>
                        <cell><m>42</m></cell>
                    </row>
                    <row>
                        <cell><m>1500 - 2000</m></cell>
                        <cell><m>35</m></cell>
                    </row>
                    <row>
                        <cell><m>2000 - 2500</m></cell>
                        <cell><m>20</m></cell>
                    </row>
                    <row>
                        <cell><m>2500 - 3000</m></cell>
                        <cell><m>15</m></cell>
                    </row>
                    <row>
                        <cell><m>3000 - 4000</m></cell>
                        <cell><m>18</m></cell>
                    </row>
                    <row>
                        <cell><m>4000 - 5000</m></cell>
                        <cell><m>42</m></cell>
                    </row>
                </tabular>
            </table>
            <p>
                Draw a histogram and a frequency polygon to represent the data.
            </p>
        </statement>
        <solution>
            <p>
                To draw a histogram and a frequency polygon, we need to find the frequency density and the midpoint of each class interval.
            </p>
            <p>
                We use frequency density instead of frequency to draw the histogram because the class widths are unequal.
            </p>
            <p>
                The formula for frequency density:
            </p>
            <p>
                <md>
                    <mrow>\textbf{Frequency density} = \amp \frac{\textbf{Frequency}}{\textbf{Class width}}</mrow>
                </md>
            </p>
            <p>
                The formula for Midpoint:
            </p>
            <p>
                <md>
                    <mrow>\textbf{Midpoint} = \amp \frac{\textbf{Lower bound + Upper bound}}{2}</mrow>
                </md>
            </p>
            <table>
                <title></title>
                <tabular left="medium" right="medium" top="medium" bottom="medium">
                    <row halign="left" header="yes">
                        <cell>Salary range(Ksh.)</cell>
                        <cell>Frequency</cell>
                        <cell>Class width</cell>
                        <cell>Frequency density</cell>
                        <cell>Midpoint</cell>
                    </row>
                    <row >
                        <cell><m>1000 - 1500</m></cell>
                        <cell><m>42</m></cell>
                        <cell><m>500</m></cell>
                        <cell><m>0.084</m></cell>
                        <cell><m>1250</m></cell>
                    </row>
                    <row>
                        <cell><m>1500 - 2000</m></cell>
                        <cell><m>35</m></cell>
                        <cell><m>500</m></cell>
                        <cell><m>0.070</m></cell>
                        <cell><m>1750</m></cell>
                    </row>
                    <row>
                        <cell><m>2000 - 2500</m></cell>
                        <cell><m>20</m></cell>
                        <cell><m>500</m></cell>
                        <cell><m>0.040</m></cell>
                        <cell><m>2250</m></cell>
                    </row>
                    <row>
                        <cell><m>2500 - 3000</m></cell>
                        <cell><m>15</m></cell>
                        <cell><m>500</m></cell>
                        <cell><m>0.030</m></cell>
                        <cell><m>2750</m></cell>
                    </row>
                    <row>
                        <cell><m>3000 - 4000</m></cell>
                        <cell><m>18</m></cell>
                        <cell><m>1000</m></cell>
                        <cell><m>0.018</m></cell>
                        <cell><m>3500</m></cell>
                    </row>
                    <row>
                        <cell><m>4000 - 5000</m></cell>
                        <cell><m>42</m></cell>
                        <cell><m>1000</m></cell>
                        <cell><m>0.042</m></cell>
                        <cell><m>4500</m></cell>
                    </row>

                </tabular>
            </table>
            <image width="50%">
                <latex-image label = "Histogram 2"> 
                    \begin{tikzpicture}
                        % Draw fine grid (10 smaller squares per main grid unit)
                        \draw[gray!30, very thin, step=0.1] (0,0) grid (10,10);

                        % Draw main grid
                        \draw[gray!70, thin, step=1] (0,0) grid (10,10);

                        % Draw axes
                        \draw[thick,->] (0,0) -- (10,0); % X-axis
                        \draw[thick,->] (0,0) -- (0,10); % Y-axis
                        \node[below] at (5,-0.8) {\textbf {Salary (KSh)}}; % X-axis label
                        \node[rotate=90] at (-1,4) {\textbf {Frequency Density}}; % Y-axis label

                        % X-axis labels (Salary Ranges)
                        \foreach \x/\label in {1/1000, 2/1500, 3/2000, 4/2500, 5/3000, 7/4000, 9/5000} {
                            \node[below] at (\x,0) {\label};
                        }

                        % Y-axis labels (2 grid units = 0.02)
                        \foreach \y/\label in {0/0, 2/0.02, 4/0.04, 6/0.06, 8/0.08, 10/0.10} {
                            \node[left] at (0,\y) {\label};
                        }

                        % Draw histogram bars (using frequency density values)
                        \draw[fill=blue!60] (1,0) rectangle (2,4.2*2);  % 1000-1500, density 0.084
                        \draw[fill=blue!60] (2,0) rectangle (3,3.5*2);  % 1500-2000, density 0.070
                        \draw[fill=blue!60] (3,0) rectangle (4,2.0*2);  % 2000-2500, density 0.040
                        \draw[fill=blue!60] (4,0) rectangle (5,1.5*2);  % 2500-3000, density 0.030
                        \draw[fill=blue!60] (5,0) rectangle (7,0.9*2);  % 3000-4000, density 0.018
                        \draw[fill=blue!60] (7,0) rectangle (9,2.1*2);  % 4000-5000, density 0.042 (Fixed from 0.010)

                        % Frequency Polygon (Connecting Midpoints)
                        \draw[thick,black] 
                            (1,0) -- 
                            (1.5,4.2*2) -- 
                            (2.5,3.5*2) -- 
                            (3.5,2.0*2) -- 
                            (4.5,1.5*2) -- 
                            (6,0.9*2) -- 
                            (8,2.1*2) -- 
                            (9,0);

                        % Mark Midpoints with dots
                        \foreach \x/\y in {1.5/4.2, 2.5/3.5, 3.5/2.0, 4.5/1.5, 6/0.9, 8/2.1} {
                            \fill[black] (\x,\y*2) circle (3pt);
                        }

                        % Graph Title
                        \node[above] at (5,10) {\textbf {Salary Distribution: Histogram and Frequency Polygon}};
                    \end{tikzpicture}
                </latex-image>
            </image>
        </solution>
    </example>
    <example>
        <statement>
            <p>
                The following frequency distribution shows the daily rainfall amounts (in mm) recorded at a weather station over a <m>60</m> day period.
            </p>
            <table>
                <title></title>
                <tabular left="medium" right="medium" top="medium" bottom="medium">
                    <row halign="left" header="yes">
                        <cell>Rainfall(mm)</cell>
                        <cell>Frequency</cell>
                    </row>
                    <row>
                        <cell><m>0 - 5</m></cell>
                        <cell><m>22</m></cell>
                    </row>
                    <row>
                        <cell><m>6 - 10</m></cell>
                        <cell><m>15</m></cell>
                    </row>
                    <row>
                        <cell><m>11 - 15</m></cell>
                        <cell><m>12</m></cell>
                    </row>
                    <row>
                        <cell><m>16 - 25</m></cell>
                        <cell><m>8</m></cell>
                    </row>
                    <row>
                        <cell><m>26 - 40</m></cell>
                        <cell><m>3</m></cell>
                    </row>
                </tabular>
            </table>
            <p>
                Create a histogram to represent this data.
            </p>
        </statement>
        <solution>
            <p>
                To draw a histogram we need to find the frequency density because class width are unequal.
            </p>
            <p>
                The formula for frequency density:
            </p>
            <p>
                <md>
                    <mrow>\textbf{Frequency density} = \amp \frac{\textbf{Frequency}}{\textbf{Class width}}</mrow>
                </md>
            </p>
            <table>
                <title></title>
                <tabular left="medium" right="medium" top="medium" bottom="medium">
                    <row halign="left" header="yes">
                        <cell>Rainfall(mm)</cell>
                        <cell>Frequency</cell>
                        <cell>Class width</cell>
                        <cell>Frequency density</cell>
                    </row>
                    <row>
                        <cell><m>5 - 10</m></cell>
                        <cell><m>22</m></cell>
                        <cell><m>5</m></cell>
                        <cell><m>4.4</m></cell>

                    </row>
                    <row>
                        <cell><m>10 - 15</m></cell>
                        <cell><m>15</m></cell>
                        <cell><m>5</m></cell>
                        <cell><m>3.0</m></cell>
                    </row>
                    <row>
                        <cell><m>15 - 20</m></cell>
                        <cell><m>12</m></cell>
                        <cell><m>5</m></cell>
                        <cell><m>2.4</m></cell>
                    </row>
                    <row>
                        <cell><m>20 - 30</m></cell>
                        <cell><m>8</m></cell>
                        <cell><m>10</m></cell>
                        <cell><m>0.8</m></cell>
                    </row>
                    <row>
                        <cell><m>30 - 45</m></cell>
                        <cell><m>3</m></cell>
                        <cell><m>15</m></cell>
                        <cell><m>0.2</m></cell>
                    </row>
                </tabular>
            </table>
            <image width="50%">
                <latex-image label = "histogram 3">
                    \begin{tikzpicture}
                        % Draw fine grid (10 smaller squares per main grid unit)
                        \draw[gray!30, very thin, step=0.1] (0,0) grid (10,6);
                        % Draw main grid
                        \draw[gray!70, thin, step=1] (0,0) grid (10,6);
                        % Draw axes
                        \draw[thick,->] (0,0) -- (10,0); % X-axis
                        \draw[thick,->] (0,0) -- (0,6); % Y-axis
                        \node[below] at (5,-0.8) {\textbf {Rainfall (mm)}}; % X-axis label
                        \node[rotate=90] at (-0.8,3) {\textbf {Frequency Density}}; % Y-axis label
                    
                        % X-axis labels
                        \foreach \x/\label in {1/5, 2/10, 3/15, 4/20, 6/30, 9/45} {
                            \node[below] at (\x,0) {\label};
                        }
                    
                        % Y-axis labels
                        \foreach \y/\label in {1/1, 2/2, 3/3, 4/4, 5/5} {
                            \node[left] at (0,\y) {\label};
                        }
                    
                        % Draw histogram bars based on the density values from the table
                        \draw[fill=blue!70] (1,0) rectangle (2,4.4);  % 5-10mm, density 4.4
                        \draw[fill=blue!70] (2,0) rectangle (3,3.0);  % 10-15mm, density 3.0
                        \draw[fill=blue!70] (3,0) rectangle (4,2.4);  % 15-20mm, density 2.4
                        \draw[fill=blue!70] (4,0) rectangle (6,0.8);  % 20-30mm, density 0.8
                        \draw[fill=blue!70] (6,0) rectangle (9,0.2);  % 30-45mm, density 0.2
                    
                        % Graph Title
                        \node[above] at (5,6) {\textbf {Histogram of Rainfall Data}};
                    \end{tikzpicture}
                </latex-image>
            </image>
        </solution>
    </example>

   </subsection>